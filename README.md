# Microsoft Foundry Fitness Analyzer ğŸ’ªğŸ“Š

A comprehensive React Native mobile app for iOS that integrates with Apple HealthKit to provide detailed fitness analytics, trend analysis, and AI-powered personalized health recommendations using Microsoft Azure Foundry Agents.

![App Icon](https://img.shields.io/badge/Platform-iOS-lightgrey)
![React Native](https://img.shields.io/badge/React%20Native-0.73-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)
![Azure OpenAI](https://img.shields.io/badge/Azure-OpenAI-green)
![License](https://img.shields.io/badge/License-MIT-yellow)

## ğŸŒŸ Features

### ğŸ“Š Dashboard
- **Real-time Metrics**: Today's calories, weekly workouts, average heart rate, and sleep tracking
- **Heart Rate Monitoring**: Interactive line chart showing recent heart rate readings
- **AI-Powered Tips**: Personalized health recommendations generated by Azure OpenAI
- **Workout Streaks**: Track your consistency and maintain motivation
- **Quick Overview**: All your key health metrics at a glance

### ğŸ’ª Workouts
- **Weekly Calorie Chart**: Bar chart showing calories burned each day
- **Activity Distribution**: Pie chart breaking down workout types
- **Detailed Workout List**: Comprehensive workout history with:
  - Duration and distance tracking
  - Calories burned
  - Heart rate data (min, max, average)
  - Workout type and timestamp
- **Smart Filtering**: Easy navigation through workout history

### ğŸ“ˆ Trends
- **14-Day Analysis**: Long-term trend visualization
- **Active Calories Trend**: Line chart tracking daily calorie burn
- **Workout Load Analysis**: Bar chart showing training intensity
- **Performance Insights**: AI-generated analysis of your progress
- **Statistical Summaries**: Average, peak, and trend calculations

### ğŸ˜´ Sleep
- **Sleep Duration Tracking**: Monitor your nightly sleep patterns
- **Sleep Stage Breakdown**: Detailed analysis of deep, REM, and light sleep
- **Quality Metrics**: Sleep quality scoring and recommendations
- **14-Day Sleep Trends**: Visualize sleep patterns over time
- **Sleep Insights**: Personalized tips for better sleep quality

### âš™ï¸ Settings
- **Dark Mode**: Beautiful dark theme optimized for nighttime use
- **HealthKit Integration**: Seamless Apple Health data sync
- **Notification Management**: Control workout reminders and health tips
- **Data Export**: Export your health data as CSV
- **Azure AI Configuration**: Connect to your Azure OpenAI instance

## ğŸ“± Screenshots

### Dashboard
<img src="docs/screenshots/dashboard.png" alt="Dashboard Screen" width="250"/>

Shows your daily overview with calories, workouts, heart rate, sleep, and AI-generated tips.

### Workouts
<img src="docs/screenshots/workouts.png" alt="Workouts Screen" width="250"/>

Detailed workout history with charts showing weekly calories and activity distribution.

### Trends
<img src="docs/screenshots/trends.png" alt="Trends Screen" width="250"/>

Analyze your fitness trends with interactive charts and AI-powered insights.

### Sleep
<img src="docs/screenshots/sleep.png" alt="Sleep Screen" width="250"/>

Track your sleep patterns with detailed breakdowns and quality metrics.

### Settings
<img src="docs/screenshots/settings.png" alt="Settings Screen" width="250"/>

Manage app preferences, HealthKit permissions, and Azure AI configuration.

## ğŸ—ï¸ Architecture

### Technology Stack
- **Frontend**: React Native 0.73 with TypeScript
- **Navigation**: React Navigation v6 with Bottom Tabs
- **Charts**: react-native-chart-kit, Victory Native
- **Health Data**: react-native-health (Apple HealthKit)
- **AI**: Azure OpenAI (Microsoft Foundry)
- **State Management**: React Hooks
- **Styling**: Dark Mode Theme System

### Azure Infrastructure
The app is powered by Azure services:
- **Azure OpenAI**: GPT-4 for generating personalized health tips
- **Azure Storage**: Secure backup of health data exports
- **Azure Key Vault**: Secure credential storage
- **Application Insights**: Monitoring and analytics
- **Log Analytics**: Centralized logging

See the [infra/README.md](infra/README.md) for deployment details.

## ğŸš€ Getting Started

### Prerequisites
- **macOS** (for iOS development)
- **Node.js** >= 18
- **Xcode** >= 15
- **CocoaPods** (for iOS dependencies)
- **Azure Subscription** (for AI features)
- **Apple Developer Account** (for device testing)

### Installation

1. **Clone the repository**
```bash
git clone https://github.com/aidenyoukhana/MicrosoftFoundryFitnessAnalyzer.git
cd MicrosoftFoundryFitnessAnalyzer
```

2. **Install dependencies**
```bash
npm install
```

3. **Install iOS dependencies**
```bash
cd ios
pod install
cd ..
```

4. **Configure Azure OpenAI** (Optional but recommended for AI features)

First, deploy the Azure infrastructure:
```bash
cd infra
az login
az group create --name fitness-analyzer-rg --location eastus
az deployment group create \
  --resource-group fitness-analyzer-rg \
  --template-file main.bicep \
  --parameters main.parameters.json
```

Then, create a `.env` file in the root directory:
```bash
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_KEY=your-api-key
AZURE_OPENAI_DEPLOYMENT=gpt-4
```

Retrieve these values from Azure:
```bash
# Get OpenAI endpoint
az deployment group show \
  --resource-group fitness-analyzer-rg \
  --name main \
  --query properties.outputs.openAIEndpoint.value

# Get OpenAI API key from Key Vault
az keyvault secret show \
  --vault-name $(az deployment group show \
    --resource-group fitness-analyzer-rg \
    --name main \
    --query properties.outputs.keyVaultName.value -o tsv) \
  --name openai-api-key \
  --query value -o tsv
```

### Running the App

#### iOS Simulator
```bash
npm run ios
```

#### iOS Device
```bash
npm run ios -- --device "Your Device Name"
```

#### Start Metro Bundler
```bash
npm start
```

## ğŸ“ Configuration

### HealthKit Permissions

The app requests the following HealthKit permissions:
- Workouts
- Heart Rate
- Sleep Analysis
- Active Energy Burned
- Basal Energy Burned
- Distance Walking/Running
- Steps

These are configured in `ios/Info.plist`:
```xml
<key>NSHealthShareUsageDescription</key>
<string>We need access to your health data to provide personalized fitness insights and track your progress.</string>
<key>NSHealthUpdateUsageDescription</key>
<string>We need permission to update your health data.</string>
```

### Azure OpenAI Setup

1. Ensure Azure OpenAI service is available in your subscription
2. Deploy the infrastructure using Bicep templates in `infra/`
3. Configure environment variables with your credentials
4. The app will automatically use AI features when configured

Without Azure OpenAI configuration, the app will use mock AI tips.

## ğŸ§ª Development

### Project Structure
```
MicrosoftFoundryFitnessAnalyzer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ screens/          # Screen components
â”‚   â”‚   â”œâ”€â”€ DashboardScreen.tsx
â”‚   â”‚   â”œâ”€â”€ WorkoutsScreen.tsx
â”‚   â”‚   â”œâ”€â”€ TrendsScreen.tsx
â”‚   â”‚   â”œâ”€â”€ SleepScreen.tsx
â”‚   â”‚   â””â”€â”€ SettingsScreen.tsx
â”‚   â”œâ”€â”€ components/       # Reusable UI components
â”‚   â”‚   â””â”€â”€ Card.tsx
â”‚   â”œâ”€â”€ navigation/       # Navigation configuration
â”‚   â”‚   â””â”€â”€ BottomTabNavigator.tsx
â”‚   â”œâ”€â”€ services/         # Business logic and API calls
â”‚   â”‚   â”œâ”€â”€ HealthService.ts
â”‚   â”‚   â””â”€â”€ AIService.ts
â”‚   â”œâ”€â”€ types/           # TypeScript type definitions
â”‚   â”‚   â””â”€â”€ health.ts
â”‚   â”œâ”€â”€ theme/           # Design system and styles
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ App.tsx          # Main app component
â”œâ”€â”€ ios/                 # iOS native code
â”œâ”€â”€ android/            # Android native code (future)
â”œâ”€â”€ infra/              # Azure Infrastructure as Code
â”‚   â”œâ”€â”€ main.bicep
â”‚   â”œâ”€â”€ main.parameters.json
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ docs/               # Documentation and screenshots
â””â”€â”€ package.json
```

### Available Scripts

- `npm start` - Start Metro bundler
- `npm run ios` - Run on iOS simulator
- `npm run android` - Run on Android emulator
- `npm run lint` - Run ESLint
- `npm run lint:fix` - Fix linting issues
- `npm test` - Run tests

### Adding New Features

1. **New Screen**: Create component in `src/screens/`
2. **Navigation**: Add route in `src/navigation/BottomTabNavigator.tsx`
3. **Data Service**: Add methods in `src/services/`
4. **Types**: Define interfaces in `src/types/`
5. **Styling**: Use theme from `src/theme/`

## ğŸ¨ Design System

### Dark Mode Theme
The app features a carefully crafted dark mode design:
- **Background**: Pure black (#000000)
- **Surface**: Dark gray (#1C1C1E)
- **Primary**: iOS blue (#0A84FF)
- **Chart Colors**: Vibrant palette for data visualization

### Typography
- Title: 28px, Bold
- Heading: 22px, Semi-bold
- Subheading: 18px, Semi-bold
- Body: 16px, Regular
- Caption: 14px, Regular

### Components
- **Card**: Elevated surface with rounded corners
- **MetricCard**: Display key metrics with value and unit
- **SectionHeader**: Section dividers with title and subtitle

## ğŸ”’ Security & Privacy

- **Local Data**: All health data is processed locally on device
- **HealthKit**: Uses Apple's secure HealthKit framework
- **Azure Security**: Credentials stored in Azure Key Vault
- **No Data Collection**: The app does not collect or share personal data
- **TLS Encryption**: All API calls use HTTPS
- **Secure Storage**: Sensitive data encrypted at rest

## ğŸ¤– AI Features

### Personalized Health Tips
The app uses Azure OpenAI (GPT-4) to generate personalized recommendations based on:
- Daily calorie burn
- Weekly workout frequency
- Average heart rate
- Sleep patterns
- Workout consistency
- Training load

### Tip Categories
- **Workout**: Exercise recommendations and training advice
- **Sleep**: Sleep quality improvement suggestions
- **Nutrition**: Diet and hydration tips
- **Recovery**: Rest and recuperation guidance
- **General**: Overall wellness recommendations

### Priority Levels
- **High**: Urgent health concerns or important recommendations
- **Medium**: Beneficial improvements to consider
- **Low**: Optional optimizations and nice-to-haves

## ğŸ“Š Data Visualization

### Chart Types
1. **Line Charts**: Heart rate trends, sleep duration, calorie trends
2. **Bar Charts**: Weekly calories, workout load intensity
3. **Pie Charts**: Workout type distribution
4. **Progress Charts**: Sleep stage distribution

### Interactivity
- Pull-to-refresh on all screens
- Smooth animations and transitions
- Responsive charts that adapt to screen size
- Color-coded data for easy interpretation

## ğŸ§© HealthKit Integration

### Supported Data Types
- **Workouts**: All workout types with metadata
- **Heart Rate**: Continuous heart rate monitoring
- **Sleep**: Sleep analysis with stages
- **Calories**: Active and resting energy
- **Distance**: Walking and running distance
- **Steps**: Daily step count

### Mock Data
For development and Android support, the app includes realistic mock data generators.

## ğŸŒ Future Enhancements

- [ ] Android support with Google Fit integration
- [ ] Apple Watch companion app
- [ ] Social features and challenges
- [ ] Nutrition tracking
- [ ] Workout planning and scheduling
- [ ] Integration with fitness equipment
- [ ] Multi-language support
- [ ] Export data to PDF reports
- [ ] Wearable device integration
- [ ] Advanced AI coaching features

## ğŸ› Troubleshooting

### Common Issues

**HealthKit permissions not working**
- Ensure device (not simulator) is used for HealthKit
- Check Info.plist has required usage descriptions
- Verify HealthKit capability is enabled in Xcode

**Metro bundler issues**
```bash
npm start -- --reset-cache
```

**CocoaPods errors**
```bash
cd ios
pod deintegrate
pod install
cd ..
```

**Build failures**
- Clean build folder in Xcode (Cmd+Shift+K)
- Delete derived data
- Ensure Xcode and CocoaPods are up to date

**Azure OpenAI not working**
- Verify credentials in `.env` file
- Check Azure OpenAI service is deployed
- Ensure GPT-4 model is available in your region
- App will gracefully fall back to mock tips if Azure is unavailable

## ğŸ“„ License

MIT License - see [LICENSE](LICENSE) file for details

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“§ Support

For issues, questions, or suggestions:
- Open an issue on GitHub
- Check existing documentation
- Review Azure OpenAI setup guide

## ğŸ™ Acknowledgments

- **Microsoft Azure** for Foundry Agents and OpenAI services
- **Apple** for HealthKit framework
- **React Native** community for excellent libraries
- **Chart libraries**: react-native-chart-kit, Victory Native

## ğŸ“š Additional Resources

- [React Native Documentation](https://reactnative.dev/)
- [Azure OpenAI Documentation](https://learn.microsoft.com/en-us/azure/cognitive-services/openai/)
- [Apple HealthKit Documentation](https://developer.apple.com/documentation/healthkit)
- [React Navigation Documentation](https://reactnavigation.org/)

---

**Built with â¤ï¸ using Microsoft Foundry Agents, React Native, and Azure AI**